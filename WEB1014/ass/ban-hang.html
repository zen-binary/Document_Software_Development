<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ass</title>
    <link rel="stylesheet" href="main.css" />

    <style>
      select {
        width: 20%;
        padding: 5px 10px;
        margin: 5px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 15px;
      }
      table,
      th,
      tr,
      td {
        border: 1px solid rgb(70, 70, 70);
        border-collapse: collapse;
      }
      th,
      td {
        padding: 6px 20px;
      }
      .conten {
        padding: 10px 100px;
      }
      input[type="number"] {
        padding: 5px;
        display: inline-block;
        border: 1px solid grey;
        border-radius: 5px;
        outline: none;
      }
      td .radio {
        width: 100px;
      }
    </style>
  </head>
  <body>
    <div class="main">
      <div class="hi">
        <marquee behavior="" direction="">xin chào các bạn ăn cơm chưa</marquee>
      </div>
      <div class="nav">
        <div class="header">
          <img src="image/logo.png" alt="" class="logo" />
        </div>
        <div class="menu">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="slide-show.html">SlideShow</a></li>
            <li><a href="ban-hang.html">Bán Hàng</a></li>
          </ul>
        </div>
      </div>
      <div class="conten">
        <h2>Bán hàng</h2>
        <div class="price">
          <select name="price" id="" onchange="lochang(this)">
            <option value="0">Chọn mức giá</option>
            <option value="1">Dưới 100</option>
            <option value="2">Từ 100 đến 500</option>
            <option value="3">Trên 500</option>
          </select>
        </div>
        <hr />
        <div class="banhang">
          <table id="bang" border="1" align="center">
            <thead>
              <tr>
                <td>
                  <input
                    type="checkbox"
                    onchange="chkall(this)"
                    class="radio"
                  />
                </td>
                <th>Hàng hóa</th>
                <th>Đơn giá</th>
                <th>Số lượng</th>
                <th>Thành tiền</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><input type="checkbox" name="chk" class="radio" /></td>
                <td>Iphone 1</td>
                <td>90</td>
                <td>
                  <input
                    type="number"
                    name="so"
                    value="0"
                    min="0"
                    step="1"
                    disabled
                  />
                </td>
                <th></th>
              </tr>
              <tr>
                <td><input type="checkbox" name="chk" class="radio" /></td>
                <td>Iphone 3</td>
                <td>300</td>
                <td>
                  <input
                    type="number"
                    name="so"
                    value="0"
                    min="0"
                    step="1"
                    disabled
                  />
                </td>
                <th></th>
              </tr>
              <tr>
                <td><input type="checkbox" name="chk" class="radio" /></td>
                <td>Iphone 4</td>
                <td>400</td>
                <td>
                  <input
                    type="number"
                    name="so"
                    value="0"
                    min="0"
                    step="1"
                    disabled
                  />
                </td>
                <th></th>
              </tr>
              <tr>
                <td><input type="checkbox" name="chk" class="radio" /></td>
                <td>Iphone 7</td>
                <td>700</td>
                <td>
                  <input
                    type="number"
                    name="so"
                    value="0"
                    min="0"
                    step="1"
                    disabled
                  />
                </td>
                <th></th>
              </tr>
              <tr>
                <td><input type="checkbox" name="chk" class="radio" /></td>
                <td>Iphone 9</td>
                <td>900</td>
                <td>
                  <input
                    type="number"
                    name="so"
                    value="0"
                    min="0"
                    step="1"
                    disabled
                  />
                </td>
                <th></th>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="4">Tổng</th>
                <th id="tongtien"></th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>

      <div class="footer">
        <div class="foo">
          <p>Email: chienlvph27953@fpt.edu.vn</p>
          <p>Tên đăng nhập: chienlvph27953</p>
          <p>Lớp: CP18103</p>
        </div>
      </div>
    </div>
    <script>
      function chkall(checkbox) {
        var kt = checkbox.checked;
        var chk_arr = document.getElementsByName("chk");
        var so_arr = document.getElementsByName("so");
        for (var i = 0; i < chk_arr.length; i++) {
          chk_arr[i].checked = kt;
          so_arr[i].disabled = kt ? false : true;
        }
      }

      function changeCheckbox(checkbox) {
        var the_tr = checkbox.parentElement.parentElement;
        var kt = checkbox.checked;
        var txt_so = the_tr.querySelector("input[type=number]");
        txt_so.disabled = kt ? false : true;
      }

      function changeNumber(number) {
        var soLuong = number.value;
        var dongia = number.parentElement.previousElementSibling.innerHTML;
        var tongtien = Number(dongia) * soLuong;
        var the_tien = number.parentElement.nextElementSibling;
        the_tien.innerHTML = tongtien;
        TongTien();
      }

      function TongTien() {
        var arr_tr = document.querySelectorAll("table tbody tr");
        var tong_tien = 0;
        for (var i = 0; i < arr_tr.length; i++) {
          var the_row = arr_tr[i];
          if ((the_row.style.display = "table-row")) {
            var the_th = the_row.lastElementChild.innerHTML;
            tong_tien = tong_tien + Number(the_th);
          }

          document.getElementById("tongtien").innerHTML = tong_tien;
        }
      }
      function lochang(chon) {
        var the_row = document.querySelectorAll("table tbody tr");
        switch (chon.value) {
          case "0":
            for (var i = 0; i < the_row.length; i++) {
              the_row[i].style.display = "table-row";
            }
            break;

          case "1":
            for (var i = 0; i < the_row.length; i++) {
              var td_dongia = the_row[i].children[2].innerHTML;
              if (Number(td_dongia) < 100) {
                the_row[i].style.display = "table-row";
              } else {
                the_row[i].style.display = "none";
              }
            }
            break;

          case "2":
            for (var i = 0; i < the_row.length; i++) {
              var td_dongia = the_row[i].children[2].innerHTML;
              if (Number(td_dongia) > 100 && Number(td_dongia) < 500) {
                the_row[i].style.display = "table-row";
              } else {
                the_row[i].style.display = "none";
              }
            }
            break;

          case "3":
            for (var i = 0; i < the_row.length; i++) {
              var td_dongia = the_row[i].children[2].innerHTML;
              if (Number(td_dongia) > 500) {
                the_row[i].style.display = "table-row";
              } else {
                the_row[i].style.display = "none";
              }
            }
            break;

          default:
            for (var i = 0; i < the_row.length; i++) {
              the_row[i].style.display = "table-row";
            }
            break;
        }
      }

      function sellhang() {
        var the_row = document.querySelectorAll("table tbody tr");
        for (var i = 0; i < the_row.length; i++) {
          var the_tr = the_row[i];
          the_tr.style.display = "table-row";
          var chk = the_tr.querySelector("input[type=checkbox]");
          chk.setAttribute("onchange", "changeCheckbox(this)");
          var txt_number = the_tr.querySelector("input[type=number]");
          txt_number.setAttribute("onchange", "changeNumber(this)");
        }
      }
      sellhang();
    </script>
  </body>
</html>
